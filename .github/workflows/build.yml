name: Interactive Debug Session

on:
  # يسمح لك بتشغيل هذا الـ workflow يدوياً من تبويب Actions
  workflow_dispatch:

jobs:
  debug:
    runs-on: windows-latest

    steps:
    # الخطوة 1: الحصول على الكود (تبقى كما هي)
    - name: Checkout code
      uses: actions/checkout@v4

    # الخطوة 2: تحميل وتثبيت AutoHotkey (تبقى كما هي)
    - name: Download, Extract, and Install AutoHotkey
      shell: pwsh
      run: |
        $ahkUrl = "https://github.com/AutoHotkey/AutoHotkey/releases/download/v2.0.18/AutoHotkey_2.0.18.zip"
        $ahkZip = "autohotkey.zip"
        Invoke-WebRequest -Uri $ahkUrl -OutFile $ahkZip
        Expand-Archive -Path $ahkZip -DestinationPath "ahk"
        Set-Location "ahk"
        & .\install.cmd /S
        
    # الخطوة 3: بدء جلسة تفاعلية للدخول اليدوي
    - name: Start interactive debug session (via tmate)
      uses: mxschmitt/action-tmate@v3